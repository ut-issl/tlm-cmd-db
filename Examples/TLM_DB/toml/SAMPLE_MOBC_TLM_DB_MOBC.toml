Target = "OBC"
PacketID = "0x00"
"Enable/Disable" = "ENABLE"
IsRestricted = "FALSE"
"Local Var" = ""

[[tlm]]
name = "TM_MODE_TIME"
type = "uint32_t"
exp = "(uint32_t)(TMGR_get_master_clock().mode_cycle)"
desc = "モード遷移後経過時刻"

[[tlm]]
name = "TM_UTL_UNIXTIME_EPOCH"
type = "double"
exp = "TMGR_get_utl_unixtime_epoch()"
desc = "UTL_cmdで用いるunixtimeの紀元"

[[tlm]]
name = "TM_CYCLES_PER_SEC_FIX_RATIO"
type = "double"
exp = "(double)(time_manager->unixtime_info_.cycle_correction)"
desc = "CYCLES_PER_SECの補正倍率. 初期値は1.0"

[[tlm]]
name_base = "MM_{}"
exp_base = "(uint8_t)(mode_manager->{})"
type = "uint8_t"
seq_num = 3
[[tlm.seq]]
name = "STS"
exp = "stat"
desc = "モード遷移実行状態"
[[tlm.seq]]
name = "OPSMODE"
exp = "current_id"
desc = "現状モード番号"
[[tlm.seq]]
name = "OPSMODE_PREV"
exp = "previous_id"
desc = "直前モード番号"

[[tlm]]
name = "TDSP_CURRENT_ID"
type = "uint8_t"
exp = "(uint8_t)(TDSP_info->task_list_id)"
desc = "現状 TaskList ID"

[[tlm]]
name_base = "TDSP_CMD_LAST_ERR_{}"
exp_base = "{type}(TDSP_info->tskd.prev_err.{})"
seq_num = 4
[[tlm.seq]]
name = "TIME_MASTER"
exp = "time.total_cycle"
type = "uint32_t"
desc = "最新内部コマンド実行時刻"
[[tlm.seq]]
name = "TIME_STEP"
exp = "time.step"
type = "uint8_t"
[[tlm.seq]]
name = "ID"
exp = "code"
type = "uint16_t"
desc = "最新内部コマンドID"
[[tlm.seq]]
name = "STS"
type = "int32_t"
exp = "sts"
status = "7.1"
desc = "最新内部コマンド実行結果"

[[tlm]]
name = "GS_RET_FROM_IF_RX"
type = "int32_t"
exp = "(int32_t)gs_driver->latest_info->rx.ret_from_if_rx"

[[tlm]]
name = "TCTF_LAST_RECV_ACK"
type = "uint8_t"
exp = "(uint8_t)gs_driver->latest_info->rx.rec_status"
status = "2.10"
desc = "TC Transer Frame DS処理結果"

[[tlm]]
name = "TCTF_LAST_RECV_TIME"
type = "uint32_t"
exp = "(uint32_t)gs_driver->latest_info->rx.last_rec_time"
desc = "最新TC Transer Frame受信時刻"

[[tlm]]
name = "TCTF_FARM_PW"
type = "uint8_t"
exp = "(uint8_t)gs_validate_info->positive_window_width"
desc = "FARM-1 Positive Window Width"

[[tlm]]
name = "TCP_LAST_RECV_ACK"
type = "uint8_t"
exp = "(uint8_t)gs_driver->latest_info->rx.cmd_ack"
status = "13.1"
desc = "最新TCPacket受信処理結果"

[[tlm]]
name = "TLM_TX_PORT_TYPE"
type = "uint8_t"
exp = "(uint8_t)gs_driver->tlm_tx_port_type"
status = "2.11"
desc = "TLM の送信情報がUARTのものかGSのものか"

[[tlm]]
name = "GS_CMD_COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_gs_cmd_list)"
desc = "地上局コマンドカウンタ"

[[tlm]]
block_num = 1
seq_num = 2
[[tlm.block]]
name_base = "GS_CMD_LAST_{{}}_{}"
exp_base = "{type}(gs_command_dispatcher->{{}}.{})"
seq_num = 3
[[tlm.block.seq]]
name = "TIME"
exp = "time.total_cycle"
type = "uint32_t"
desc = "最新地上局コマンド実行時刻"
[[tlm.block.seq]]
name = "ID"
type = "uint16_t"
exp = "code"
desc = "最新地上局コマンドID"
[[tlm.block.seq]]
name = "STS"
type = "int32_t"
exp = "sts"
status = "7.1"
desc = "最新地上局コマンド実行結果"
[[tlm.seq]]
q_range = []
name = "EXEC"
exp = "prev"
[[tlm.seq]]
q_range = []
name = "ERR"
exp = "prev_err"

[[tlm]]
name = "GS_CMD_ERR_COUNTER"
type = "uint32_t"
exp = "(uint32_t)(gs_command_dispatcher->error_counter)"
desc = "地上局コマンド実行異常カウンタ"

[[tlm]]
name = "RT_CMD_COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_rt_cmd_list)"
desc = "内部コマンドカウンタ"

[[tlm]]
block_num = 1
seq_num = 2
[[tlm.block]]
name_base = "RT_CMD_LAST_{{}}_{}"
exp_base = "{type}(realtime_command_dispatcher->{{}}.{})"
seq_num = 3
[[tlm.block.seq]]
name = "TIME"
exp = "time.total_cycle"
type = "uint32_t"
desc = "最新内部コマンド実行時刻"
[[tlm.block.seq]]
name = "ID"
type = "uint16_t"
exp = "code"
desc = "最新内部コマンドID"
[[tlm.block.seq]]
name = "STS"
type = "int32_t"
exp = "sts"
status = "7.1"
desc = "最新内部コマンド実行結果"
[[tlm.seq]]
q_range = []
name = "EXEC"
exp = "prev"
[[tlm.seq]]
q_range = []
name = "ERR"
exp = "prev_err"

[[tlm]]
name = "RT_CMD_ERR_COUNTER"
type = "uint32_t"
exp = "(uint32_t)(realtime_command_dispatcher->error_counter)"
desc = "地上局コマンド実行異常カウンタ"

[[tlm]]
name = "TLC_GS.COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_tl_cmd_list[TLCD_ID_FROM_GS])"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "TLC_GS.QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_tl_cmd_list[TLCD_ID_FROM_GS]))"
desc = "TL0登録コマンド数"

[[tlm]]
block_num = 1
seq_num = 2
[[tlm.block]]
name_base = "TLC_GS.LAST_{{}}_{}"
exp_base = "{type}(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS].{{}}.{})"
seq_num = 3
[[tlm.block.seq]]
name = "TIME"
exp = "time.total_cycle"
type = "uint32_t"
desc = "最新TL0コマンド実行時刻"
[[tlm.block.seq]]
name = "ID"
type = "uint16_t"
exp = "code"
desc = "最新TL0コマンドID"
[[tlm.block.seq]]
name = "STS"
type = "int32_t"
exp = "sts"
status = "7.1"
desc = "最新TL0コマンド実行結果"
[[tlm.seq]]
q_range = []
name = "EXEC"
exp = "prev"
[[tlm.seq]]
q_range = []
name = "ERR"
exp = "prev_err"


[[tlm]]
name_base = "TLC_GS.{}"
exp_base = "{type}(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS].{})"
seq_num = 3
[[tlm.seq]]
name = "ERR_COUNTER"
type = "uint32_t"
exp = "error_counter"
desc = "地上局コマンド実行異常カウンタ"
[[tlm.seq]]
name = "SOE_FLAG"
type = "uint8_t"
exp = "stop_on_error"
status = "2.12"
[[tlm.seq]]
name = "LOCKOUT_FLAG"
type = "uint8_t"
exp = "lockout"
status = "2.13"

[[tlm]]
name = "TLC_GS.NEXT_TIME"
type = "uint32_t"
exp = "(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_FROM_GS])) ? 0 : (uint32_t)CCP_get_ti((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_FROM_GS]))->packet)))"
desc = "次TL0コマンド実行時刻"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_GS.NEXT_ID"
type = "uint16_t"
exp = "(uint16_t)(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_FROM_GS])) ? 0 : CCP_get_id((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_FROM_GS]))->packet)))"
desc = "次TL0コマンドID"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_BC.COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_tl_cmd_list[TLCD_ID_DEPLOY_BC])"
desc = "TL1コマンドカウンタ"

[[tlm]]
name = "TLC_BC.QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_tl_cmd_list[TLCD_ID_DEPLOY_BC]))"
desc = "TL1登録コマンド数"

[[tlm]]
block_num = 1
seq_num = 2
[[tlm.block]]
name_base = "TLC_BC.LAST_{{}}_{}"
exp_base = "{type}(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_BC].{{}}.{})"
seq_num = 3
[[tlm.block.seq]]
name = "TIME"
exp = "time.total_cycle"
type = "uint32_t"
desc = "最新TL1コマンド実行時刻"
[[tlm.block.seq]]
name = "ID"
type = "uint16_t"
exp = "code"
desc = "最新TL1コマンドID"
[[tlm.block.seq]]
name = "STS"
type = "int32_t"
exp = "sts"
status = "7.1"
desc = "最新TL1コマンド実行結果"
[[tlm.seq]]
q_range = []
name = "EXEC"
exp = "prev"
[[tlm.seq]]
q_range = []
name = "ERR"
exp = "prev_err"

[[tlm]]
name = "TLC_BC.ERR_COUNTER"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_BC].error_counter)"
desc = "地上局コマンド実行異常カウンタ"

[[tlm]]
name = "TLC_BC.SOE_FLAG"
type = "uint8_t"
exp = "(uint8_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_BC].stop_on_error)"
status = "2.12"

[[tlm]]
name = "TLC_BC.LOCKOUT_FLAG"
type = "uint8_t"
exp = "(uint8_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_BC].lockout)"
status = "2.13"

[[tlm]]
name = "TLC_BC.NEXT_TIME"
type = "uint32_t"
exp = "(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_BC])) ? 0 : (uint32_t)CCP_get_ti((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_BC]))->packet)))"
desc = "次TL1コマンド実行時刻"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_BC.NEXT_ID"
type = "uint16_t"
exp = "(uint16_t)(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_BC])) ? 0 : CCP_get_id((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_BC]))->packet)))"
desc = "次TL1コマンドID"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_TLM.COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_tl_cmd_list[TLCD_ID_DEPLOY_TLM])"
desc = "TL1コマンドカウンタ"

[[tlm]]
name = "TLC_TLM.QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_tl_cmd_list[TLCD_ID_DEPLOY_TLM]))"
desc = "TL1登録コマンド数"

[[tlm]]
name = "TLC_TLM.LAST_EXEC_TIME"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].prev.time.total_cycle)"
desc = "最新TL1コマンド実行時刻"

[[tlm]]
name = "TLC_TLM.LAST_EXEC_ID"
type = "uint16_t"
exp = "(uint16_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].prev.code)"
desc = "最新TL1コマンドID"

[[tlm]]
name = "TLC_TLM.LAST_EXEC_STS"
type = "int32_t"
exp = "(int32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].prev.sts)"
status = "7.1"
desc = "最新TL1コマンド実行結果"

[[tlm]]
name = "TLC_TLM.LAST_ERR_TIME"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].prev_err.time.total_cycle)"
desc = "最新TL1コマンド実行時刻"

[[tlm]]
name = "TLC_TLM.LAST_ERR_ID"
type = "uint16_t"
exp = "(uint16_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].prev_err.code)"
desc = "最新TL1コマンドID"

[[tlm]]
name = "TLC_TLM.LAST_ERR_STS"
type = "int32_t"
exp = "(int32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].prev_err.sts)"
status = "7.1"
desc = "最新TL1コマンド実行結果"

[[tlm]]
name = "TLC_TLM.ERR_COUNTER"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].error_counter)"
desc = "地上局コマンド実行異常カウンタ"

[[tlm]]
name = "TLC_TLM.SOE_FLAG"
type = "uint8_t"
exp = "(uint8_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].stop_on_error)"
status = "2.12"

[[tlm]]
name = "TLC_TLM.LOCKOUT_FLAG"
type = "uint8_t"
exp = "(uint8_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_DEPLOY_TLM].lockout)"
status = "2.13"

[[tlm]]
name = "TLC_TLM.NEXT_TIME"
type = "uint32_t"
exp = "(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_TLM])) ? 0 : (uint32_t)CCP_get_ti((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_TLM]))->packet)))"
desc = "次TL1コマンド実行時刻"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_TLM.NEXT_ID"
type = "uint16_t"
exp = "(uint16_t)(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_TLM])) ? 0 : CCP_get_id((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_DEPLOY_TLM]))->packet)))"
desc = "次TL1コマンドID"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_MIS.COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_tl_cmd_list[TLCD_ID_FROM_GS_FOR_MISSION])"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "TLC_MIS.QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_tl_cmd_list[TLCD_ID_FROM_GS_FOR_MISSION]))"
desc = "TL0登録コマンド数"

[[tlm]]
name = "TLC_MIS.LAST_EXEC_TIME"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].prev.time.total_cycle)"
desc = "最新TL0コマンド実行時刻"

[[tlm]]
name = "TLC_MIS.LAST_EXEC_ID"
type = "uint16_t"
exp = "(uint16_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].prev.code)"
desc = "最新TL0コマンドID"

[[tlm]]
name = "TLC_MIS.LAST_EXEC_STS"
type = "int32_t"
exp = "(int32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].prev.sts)"
status = "7.1"
desc = "最新TL0コマンド実行結果"

[[tlm]]
name = "TLC_MIS.LAST_ERR_TIME"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].prev_err.time.total_cycle)"
desc = "最新TL0コマンド実行時刻"

[[tlm]]
name = "TLC_MIS.LAST_ERR_ID"
type = "uint16_t"
exp = "(uint16_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].prev_err.code)"
desc = "最新TL0コマンドID"

[[tlm]]
name = "TLC_MIS.LAST_ERR_STS"
type = "int32_t"
exp = "(int32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].prev_err.sts)"
status = "7.1"
desc = "最新TL0コマンド実行結果"

[[tlm]]
name = "TLC_MIS.ERR_COUNTER"
type = "uint32_t"
exp = "(uint32_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].error_counter)"
desc = "地上局コマンド実行異常カウンタ"

[[tlm]]
name = "TLC_MIS.SOE_FLAG"
type = "uint8_t"
exp = "(uint8_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].stop_on_error)"
status = "2.12"

[[tlm]]
name = "TLC_MIS.LOCKOUT_FLAG"
type = "uint8_t"
exp = "(uint8_t)(timeline_command_dispatcher->dispatcher[TLCD_ID_FROM_GS_FOR_MISSION].lockout)"
status = "2.13"

[[tlm]]
name = "TLC_MIS.NEXT_TIME"
type = "uint32_t"
exp = "(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_FROM_GS_FOR_MISSION])) ? 0 : (uint32_t)CCP_get_ti((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_FROM_GS_FOR_MISSION]))->packet)))"
desc = "次TL0コマンド実行時刻"
note = "変数指定が大変なことに…"

[[tlm]]
name = "TLC_MIS.NEXT_ID"
type = "uint16_t"
exp = "(uint16_t)(PL_is_empty(&(PH_tl_cmd_list[TLCD_ID_FROM_GS_FOR_MISSION])) ? 0 : CCP_get_id((const CommonCmdPacket*)(PL_get_head(&(PH_tl_cmd_list[TLCD_ID_FROM_GS_FOR_MISSION]))->packet)))"
desc = "次TL0コマンドID"
note = "変数指定が大変なことに…"

[[tlm]]
name = "BCT_BLK_PTR"
type = "uint8_t"
exp = "(uint8_t)(block_command_table->pos.block)"
desc = "BCT ブロックポインタ"

[[tlm]]
name = "BCT_CMD_PTR"
type = "uint8_t"
exp = "(uint8_t)(block_command_table->pos.cmd)"
desc = "BCT コマンドポインタ"

[[tlm]]
name = "BCT_REGD_TIME"
type = "uint32_t"
exp = "((block_command_table->pos.cmd == 0) ? 0 : (uint32_t)BCT_get_ti(block_command_table->pos.block, (uint8_t)(block_command_table->pos.cmd-1)))"
desc = "BCT 登録コマンド時刻"
note = "変数指定が大変なことに…"

[[tlm]]
name = "BCT_REGD_ID"
type = "uint16_t"
exp = "(uint16_t)((block_command_table->pos.cmd == 0) ? 0 : BCT_get_id(block_command_table->pos.block, (uint8_t)(block_command_table->pos.cmd-1)))"
desc = "BCT 登録コマンドID"
note = "変数指定が大変なことに…"

[[tlm]]
name = "MS_BUFFER_AVAILABLE"
type = "uint8_t"
exp = "gs_driver->ccsds_info.buffer_num"
desc = "CCSDS MS VCDU 使用量"

[[tlm]]
name = "MS_T2M_FLUSH_INTERVAL"
type = "uint32_t"
exp = "(uint32_t)(DI_GS_ms_tlm_packet_handler->tc_packet_to_m_pdu.flush_interval)"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "RP_T2M_FLUSH_INTERVAL"
type = "uint32_t"
exp = "(uint32_t)(DI_GS_rp_tlm_packet_handler->tc_packet_to_m_pdu.flush_interval)"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "MS_TLM_COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_ms_tlm_list)"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "MS_TLM_QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_ms_tlm_list))"
desc = "TL0登録コマンド数"

[[tlm]]
name = "ST_TLM_COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_st_tlm_list)"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "ST_TLM_QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_st_tlm_list))"
desc = "TL0登録コマンド数"

[[tlm]]
name = "RP_TLM_COUNTER"
type = "uint32_t"
exp = "PL_count_executed_nodes(&PH_rp_tlm_list)"
desc = "TL0コマンドカウンタ"

[[tlm]]
name = "RP_TLM_QUEUED"
type = "uint8_t"
exp = "(uint8_t)(PL_count_active_nodes(&PH_rp_tlm_list))"
desc = "TL0登録コマンド数"

[[tlm]]
name = "TCI_TX_CYCLE"
type = "uint32_t"
exp = "(uint32_t)gs_driver->latest_info->tx.send_cycle"
desc = "時刻校正情報::送出サイクル"

[[tlm]]
name = "TCI_TX_BITRATE"
type = "uint32_t"
exp = "gs_driver->driver_ccsds.ccsds_config.bitrate"
desc = "時刻校正情報::送出ビットレート"

[[tlm]]
name = "TCI_VCID"
type = "uint8_t"
exp = "(uint8_t)gs_driver->latest_info->tx.vcid"
desc = "時刻構成情報::送出VCID"

[[tlm]]
name = "TCI_VCDU_COUNTER"
type = "uint32_t"
exp = "gs_driver->latest_info->tx.vcdu_counter"
desc = "時刻校正情報::送出VCDUカウンタ"

